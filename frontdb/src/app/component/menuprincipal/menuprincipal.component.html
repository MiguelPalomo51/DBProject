<div class="container-fluid p-0 main-bg">
  <div class="row g-0" style="min-height: 100vh">
    <!-- Menú lateral -->
    <nav
      class="col-md-3 bg-dark text-white p-3 rounded-0 d-flex flex-column justify-content-start"
      style="min-height: 100vh"
    >
      <h2 class="text-center">Admin DB</h2>
      <a href="#" class="d-block text-white py-2">Salir</a>
      <a href="#" class="d-block text-white py-2">Permisos</a>
    </nav>

    <!-- Contenido principal sobre fondo semi-transparente -->
    <div
      class="col-md-9 d-flex flex-column align-items-center justify-content-center"
      style="min-height: 100vh"
    >
      <div class="main-panel p-4 w-100 d-flex flex-column align-items-center">
        <h2 class="mb-4">Ejecutar Consulta SQL</h2>

        <label for="baseSelect" class="form-label">Selecciona una base de datos:</label>
        <select id="baseSelect" class="form-select mb-3" (change)="onBaseSeleccionada($event)">
          <option value="">-- Selecciona una base --</option>
          <option *ngFor="let bd of basesDeDatos" [value]="bd"> {{ bd }} </option>
        </select>

        <textarea
          id="query"
          class="form-control mb-3"
          [(ngModel)]="consultaSQL"
          style="width: 90%; height: 250px; font-size: 1.3rem"
          placeholder="Escribe tu consulta SQL aquí..."
        ></textarea>

        <div class="w-100 d-flex justify-content-center">
          <button
            class="btn btn-success mb-4"
            style="width: 220px"
            (click)="ejecutarConsulta()"
          >
            Ejecutar
          </button>
        </div>

        <div *ngIf="mensajeError" class="alert alert-danger" style="width: 90%;">
          {{ mensajeError }}
        </div>
        <div *ngIf="mensajeExito" class="alert alert-success" style="width: 90%;">
          {{ mensajeExito }}
        </div>

        <h3 class="mt-3">Resultado:</h3>

        <div class="table-responsive" style="width: 90%; min-height: 200px">
          <table
            id="resultado"
            class="table table-bordered table-striped mb-0"
            style="font-size: 1.15rem"
            *ngIf="resultadoConsulta.length > 0"
          >
            <thead>
              <tr>
                <th *ngFor="let key of resultadoConsulta[0] | keyvalue">{{ key.key }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let fila of resultadoConsulta">
                <td *ngFor="let valor of fila | keyvalue">{{ valor.value }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .main-bg {
    background-image: url('https://p4.wallpaperbetter.com/wallpaper/1003/652/895/white-line-abstraction-grey-wallpaper-preview.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    min-height: 100vh;
  }
  .main-panel {
    background: rgba(255,255,255,0.80);
    border-radius: 20px;
    box-shadow: 0 0 30px 0 rgba(0,0,0,0.10);
    max-width: 900px;
    margin: 40px auto;
  }
</style>
